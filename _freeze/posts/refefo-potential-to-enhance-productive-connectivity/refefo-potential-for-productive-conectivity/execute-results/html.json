{
  "hash": "c949ab2635b655a971283e3deafea05f",
  "result": {
    "markdown": "---\ntitle: \"REFEFO Potential to Enhance Productive Connectivity\"\nsubtitle: \"El Potencial de la REDFO para Mejorar la Conectividad Productiva\"\nauthor: \"Martin Olmos\"\ndate: \"2024-04-26\"\nformat: \n    html:\n        code-fold: show\nslug: []\ncategories:\n    - \"REFEFO\"\n    - \"Productive Connectivity\"\ndraft: false\nexecute: \n  warning: false\n  eval: false\n---\n\n::: {.content-visible when-profile=\"spanish\"}\n\nLa mayoría de los países de la región tienen algún tipo de estrategia más o menos definida y articulada para mejorar la conectvidad digital de las poblaciones vulnerables, aquellas que viven en zonas de baja densidad poblacional donde a veces el sector privado por sí solo no tiene los incentivos para invertir en infraestrutura, o para llevar la conectividad a servicios de educación y salud. Sin embargo, no siempre se ha pensado en la conectividad productiva, es decir, en cómo la conectividad puede mejorar la productividad de las empresas y de los trabajadores.\n\nUn presupuesto importante para llegar con conectividad a un lugar es que existan redes troncales que permitan luego desarrollar la denominada \"última milla\" desde estas redes hasta los hogares y empresas. Argentina, por ejemplo, cuenta con la Red Federal de Fibra Óptica (REFEFO) gestionada por [ARSAT](https://www.arsat.com.ar), que es una red troncal que atraviesa las 23 provincias del país, llegando a unas 1.300 localidades, muchas de las cuales tienen poblaciones de menos de 10.000 habitantes. Por supuesto que existen también redes troncales de fibra óptica de operadores privados, pero el tendido de las mismas y la ubicación de los nodos de conexión no está disponible públicamente.\n\nPero volviendo al punto anterior, analicemos el potencial de la REFEFO para mejorar la conectividad productiva. Tomemos por ejemplo el sector agropecuario, que es uno de los más importantes de la economía argentina y el mayor generador de divisas.   \n\nPodemos utilizar los datos del ex Ministerio de Desarrollo Productivo para georrefenciar las empresas agropecuarias y calcular la distancia de cada una de ellas al nodo de la REFEFO más cercano y luego analizar la distribución de estas distancias.\n\nEn primer lugar, obtenemos, filtramos y cruzamos los datos necesarios para el análisis:\n\n:::\n\n::: {.content-visible when-profile=\"english\"}\n\nMost countries in the region have some sort of strategy to improve digital connectivity for vulnerable populations, for those who live in low density areas where the private sector alone does not have the incentives to invest in infrastructure, or to bring connectivity to education and health services. However, we cannot say the same about productive connectivity, meaning, connectivity infrastructure oriented towards improving the productivity of companies and workers.\n\nAn important prerequisite for bringing connectivity to a place is the existance of backbone networks that allow the development of the so-called \"last mile\" to connect homes and businesses. Argentina, for example, has the Federal Fiber Optic Network (REFEFO) managed by [ARSAT](https://www.arsat.com.ar), which is a backbone network that goes through the 23 provinces of the country, reaching about 1,300 localities, many of which have populations of less than 10,000 people. Of course, there are also other backbone fiber optic networks of private operators, but the layout of these networks and the location of the connection nodes is not publicly available.\n\nBut going back to the previous point, let's analyze the potential of REFEFO to improve productive connectivity. Let's take for example the agricultural sector, which is one of the most important in the Argentine economy and the most important regarding exports.\n\nWe can use data from the former Ministry of Productive Development to georeference agricultural companies and calculate the distance of each of them to the nearest REFEFO node and then analyze the distribution of these distances.\n\nFirst, we will obtain, filter and merge the necessary data for the analysis:\n\n:::\n\n::: {.cell execution_count=1}\n``` {.python .cell-code}\nimport pandas as pd\nimport geopandas as gpd\nfrom requests import Request\nfrom shapely.geometry import box\n\n# Obtengo los datos de establecimientos productivos\nestab = pd.read_csv('https://cdn.produccion.gob.ar/cdn-cep/establecimientos-productivos/distribucion_establecimientos_productivos_sexo.csv')\n\n# Obtengo datos del nomenclador de AFIP\nclae = pd.read_csv('https://cdn.produccion.gob.ar/cdn-cep/clae_agg.csv')\n\n# Uno los datos de establecimientos con el nomenclador\nestab = estab.merge(clae[['clae6', 'letra_desc']], left_on='clae6', right_on='clae6')\n\n# Filtro los del sector agropecuario\nestab_agro = estab[estab['letra_desc'] == ' AGRICULTURA, GANADERÍA, CAZA, SILVICULTURA Y PESCA']\n\n# Transformo los datos de establecimientos a un GeoDataFrame\nestab_agro_gpd = gpd.GeoDataFrame(estab_agro, geometry=gpd.points_from_xy(estab_agro.lon, estab_agro.lat), crs='EPSG:4326')\n\n# Obtengo los datos de los nodos de REFEFO\nidecom_url = 'https://www.idecom.gob.ar/geoserver/ows'\nparams = {\n    'service': 'wfs',\n    'version': '1.3.0',\n    'request': 'GetFeature',\n    'typeName': 'idera:a010504-NODOS-FO',\n    'outputFormat': 'json'\n}\n\nrefefo_nodos_url = Request('GET', idecom_url, params=params).prepare().url\n\nrefefo_nodos = gpd.read_file(refefo_nodos_url)\n\n# Obtengo los datos de la geometría de las provincias\nign_url = 'https://wms.ign.gob.ar/geoserver/ows'\nparams = {\n    'service': 'wfs',\n    'version': '1.1.0',\n    'request': 'GetFeature',\n    'typeName': 'ign:provincia',\n    'outputFormat': 'json'\n}\n\nprov_url = Request('GET', ign_url, params=params).prepare().url\nprov = gpd.read_file(prov_url)\n\n# Recorto las provincias a la parte continental de Argentina\nbbox = (-76.36532,\n        -56.75009,\n        -51.20850,\n        -20.91625)\nbbox = gpd.GeoSeries([box(*bbox)], crs=prov.crs)\n\nprov_clipped = gpd.clip(prov, bbox)\n\n# Cruzo los establecimientos agropecuarios con el nodo de REFEFO más cercano y obtengo la distancia\nestab_agro_refefo_gpd = estab_agro_gpd.to_crs(crs=3857).sjoin_nearest(refefo_nodos.to_crs(3857), how='left', distance_col='distance')\n```\n:::\n\n\n::: {.content-visible when-profile=\"spanish\"}\n\nLuego vamos a plotear en un mapa cada uno de los establecimientos agropecuarios y asignarle un color en función de la distancia con el nodo de la REFEFO más cercano.\n\n:::\n\n::: {.content-visible when-profile=\"english\"}\n\nThen we will plot on a map each of the agricultural establishments and assign a color based on the distance to the nearest REFEFO node.\n\n:::\n\n::: {.cell execution_count=2}\n``` {.python .cell-code}\nfrom matplotlib import cm\nimport matplotlib as mpl\nimport matplotlib.pyplot as plt\n\n# Size\nfig_size_bar = (7, 4)\nsize_labels = 10\nsize_tick_labels = 8\n\nfuente_bar_pos_x = 0.0\nfuente_bar_pos_y = -0.4\n\nfuente_map_pos_x = -74.0\nfuente_map_pos_y = -59.0\n\nfontname = 'Avenir'\nfont_weight = 'ultralight'\n\nnorm = mpl.colors.Normalize(vmin=0, vmax=150000)\n\nfig, ax = plt.subplots(figsize=(10, 10))\n\nprov_clipped.boundary.plot(ax=ax, color='black', linewidth=0.5)\n\nestab_agro_refefo_gpd.to_crs('EPSG:4326').plot(ax=ax, c=estab_agro_refefo_gpd['distance'], markersize=5, alpha=0.5, legend=True)\n\nax.set_axis_off()\n\ncbar = fig.colorbar(cm.ScalarMappable(norm), ax=ax, orientation='horizontal')\ncbar.set_label('Distancia a nodo de red (m)', fontname=fontname, fontsize=size_labels, weight=font_weight)\ncbar.ax.tick_params(labelsize=size_tick_labels)\nplt.show()\n```\n:::\n\n\n![Mapa de Establecimientos Agropecuarios y Distancia a Nodo de REFEFO](mapa.png)\n\n::: {.content-visible when-profile=\"spanish\"}\n\nAdemás, vamos a plotear el histograma de las distancias para poder analizar su distribución.\n\n:::\n\n:::{.content-visible when-profile=\"english\"}\n\nAlso, we will plot the histogram of the distances to analyze their distribution.\n\n:::\n\n::: {.cell execution_count=3}\n``` {.python .cell-code}\nimport matplotlib.ticker as mticker\nimport numpy as np\n\ncolor1 = [160.0/255.0, 160.0/255.0, 160.0/255.0, 1.0]\ncolor2 = [0.0, 200.0/255.0, 200.0/255.0, 1.0]\ncolor3 = [0.0, 255.0/255.0, 255.0/255.0, 1.0]\ncolor4 = [94.0/255.0, 144.0/255.0, 227.0/255.0, 1.0]\ncolor5 = [111.0/255.0, 109.0/255.0, 163.0/255.0, 1.0]\n\ncolors = [color1, color2, color3, color4, color5]\n\n# Style\ndef crossval_style(ax):\n    ax.spines['top'].set_visible(False)\n    ax.spines['right'].set_visible(False)\n    ax.spines['left'].set_visible(False)\n    ax.spines['bottom'].set_visible(False)\n    ax.grid(axis='y', linestyle='-', alpha=0.4)\n\ncounts, bins = np.histogram(estab_agro_refefo_gpd[estab_agro_refefo_gpd['distance'] < 150000]['distance'], bins=15)\n\ndensity = counts / np.sum(counts)\n\nfig, ax = plt.subplots(figsize=(7, 4))\n\n# ax = estab_agro_refefo_gpd[estab_agro_refefo_gpd['distance'] < 150000]['distance'].hist(density=True, bins=15)\nax.hist(bins[:-1], bins, weights=density, color=colors[1])\n\n# Format the yticklabels to show actual proportions\n# ax.yaxis.set_major_formatter(mticker.PercentFormatter(xmax=0.0001))\nax.yaxis.set_major_formatter(mticker.PercentFormatter(xmax=1))\n\n# Set the font family and size of the x-axis label\nax.set_xlabel('Distancia (m)', fontname=fontname, fontsize=size_labels, weight=font_weight)\n\n# Set the font family and size of the y-axis label\nax.set_ylabel('Proporción', fontname=fontname, fontsize=size_labels, weight=font_weight)\n\n# Set the font family and size of the x-axis tick labels\nax.set_xticklabels(ax.get_xticklabels(), fontname=fontname, fontsize=size_tick_labels, weight=font_weight)\n\n# Set the font family and size of the y-axis tick labels\nax.set_yticklabels(ax.get_yticklabels(), fontname=fontname, fontsize=size_tick_labels, weight=font_weight)\n\ncrossval_style(ax)\n\nax.text(x = fuente_bar_pos_x, y = -0.3, s = f\"Fuente: Elaboración propia en base a datos del CEP XXI e IDECOM\", transform=ax.transAxes, fontname=fontname, fontsize=size_tick_labels, weight=font_weight)\n\nplt.show()\n```\n:::\n\n\n![Histograma de Distancias a Nodo de REFEFO](hist.png)\n\n::: {.content-visible when-profile=\"spanish\"}\n\nComo se puede observar en el mapa y en el histograma, la mayoría de los establecimientos agropecuarios se encuentran a menos de 10 km de un nodo de la REFEFO. Para obtener los números precisos observemos la media y los cuartiles de las distancias.\n\n:::\n\n::: {.content-visible when-profile=\"english\"}\n\nAs you can see in the map and in the histogram, most of the agricultural establishments are located less than 10 km from a REFEFO node. To get the precise numbers let's take a look at the mean and the quartiles of the distances.\n\n:::\n\n::: {.cell execution_count=4}\n``` {.python .cell-code}\nestab_agro_refefo_gpd['distance'].describe()\n```\n:::\n\n\n::: {.content-visible when-profile=\"spanish\"}\n\nLa media de las distancias de establecimientos agropecuarios al nodo de REFEFO más cercano es de 25.544 metros o 25,5 KMs. Sin embargo, como se observa en el histograma, las distancias no tienen una distribución normal sino que se trata de una distribución asimétrica a la derecha, con la mayor cantidad de distancias con valores bajos y unas pocas distancias con valores muy altos. En estos casos, la mediana es\nmás representativa que la media. Aquí la mediana es de 8.580 metros u 8,6 KMs. Esto quiere decir que el 50% de los establecimientos agropecuarios se encuentran a menos de 8,6 KMs de un nodo de REFEFO. Finalmente, el tercer cuartil es de 35.895 metros o casi 36 KMs, lo que significa que el 75% de los establecimientos agropecuarios se encuentran a menos de 36 KMs de un nodo de REFEFO.\n\nHay muchas formas de mejorar este análisis preliminar pero esta primera aproximación parece indicar que la distancia a redes troncales no debería ser un impedimento para el desarrollo de la conectividad rural productiva en la Argentina.\n\n:::\n\n::: {.content-visible when-profile=\"english\"}\n\nThe mean distance of agricultural establishments to the nearest REFEFO node is 25,544 meters or 25.5 KMs. However, as observed in the histogram, the distances do not have a normal distribution but rather a right-skewed distribution, with most distances having low values and a few distances having very high values. In these cases, the median is more representative than the mean. Here the median is 8,580 meters or 8.6 KMs. This means that 50% of the agricultural establishments are located less than 8.6 KMs from a REFEFO node. Finally, the third quartile is 35,895 meters or almost 36 KMs, which means that 75% of the agricultural establishments are located less than 36 KMs from a REFEFO node.\n\nThere are many ways in which we can improve this preliminary analysis but this first approach seems to indicate that the distance to backbone networks should not be an obstacle for the development of productive rural connectivity in Argentina.\n\n:::\n\n",
    "supporting": [
      "refefo-potential-for-productive-conectivity_files"
    ],
    "filters": [],
    "includes": {}
  }
}